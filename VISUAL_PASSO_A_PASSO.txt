```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         FIX SIMULADOS - PASSO A PASSO                     â•‘
â•‘                                                                            â•‘
â•‘  Objetivo: Resolver "Erro ao buscar simulados" no sidebar                 â•‘
â•‘  Raiz:     VIEW vw_simulados_com_questoes nÃ£o existe em Supabase          â•‘
â•‘  SoluÃ§Ã£o:  Criar VIEW + Conceder permissÃµes                               â•‘
â•‘  Tempo:    ~5 minutos                                                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ PASSO 1: ABRIR SUPABASE CLOUD                                            â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

   1. Abra em seu browser:
      â†’ https://app.supabase.io

   2. FaÃ§a login se necessÃ¡rio

   3. Selecione seu projeto ENEM

   4. Clique em "SQL Editor" (lado esquerdo menu)

   5. Clique em "+ New Query"

   Resultado: Editor SQL vazio pronto para receber cÃ³digo
   âœ… PrÃ³ximo: PASSO 2


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ PASSO 2: COPIAR CONTEÃšDO DO DEBUG SQL                                    â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

   No seu computador:
   
   1. Abra arquivo:
      â†’ /Users/fernandodias/Projeto-ENEM/DEBUG_SIMULADOS_COMPLETO.sql
   
   2. Selecione TODO o conteÃºdo (Cmd+A)
   
   3. Copie (Cmd+C)
   
   Resultado: CÃ³digo SQL copiado na Ã¡rea de transferÃªncia
   âœ… PrÃ³ximo: PASSO 3


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ PASSO 3: COLAR E EXECUTAR NO SUPABASE                                    â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

   No SQL Editor do Supabase:
   
   1. Cole o cÃ³digo (Cmd+V)
   
   2. Execute a primeira query (PASSO 1):
      
      SELECT EXISTS (
        SELECT 1 FROM information_schema.views 
        WHERE table_schema = 'public' 
        AND table_name = 'vw_simulados_com_questoes'
      ) as "VIEW Existe?";
   
   3. Veja o resultado:
      
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ VIEW Existe? â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚ t            â”‚  â† VIEW EXISTE âœ… (pule para PASSO 6)
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      
      OU
      
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ VIEW Existe? â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚ f            â”‚  â† VIEW NÃƒO EXISTE âŒ (continua PASSO 4)
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   Resultado: Sabemos se VIEW existe
   âœ… PrÃ³ximo: PASSO 4 ou 6 (depende do resultado)


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ PASSO 4: CRIAR VIEW (SÃ“ SE PASSO 3 RETORNOU 'f')                         â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

   Se resultado foi 'f' (VIEW nÃ£o existe):
   
   1. Execute o bloco CREATE VIEW:
   
      DROP VIEW IF EXISTS public.vw_simulados_com_questoes CASCADE;

      CREATE VIEW public.vw_simulados_com_questoes AS
      SELECT 
        s.id_simulado,
        s.nome,
        s.descricao,
        s.data_criacao,
        s.data_atualizacao,
        s.ativo,
        COUNT(sq.id_simulado_questao) as total_questoes
      FROM public.simulados s
      LEFT JOIN public.simulado_questoes sq ON s.id_simulado = sq.id_simulado
      WHERE s.ativo = true
      GROUP BY s.id_simulado, s.nome, s.descricao, s.data_criacao, 
               s.data_atualizacao, s.ativo;

   2. Aguarde atÃ© ver "Success" âœ…
   
   Resultado: VIEW criada com sucesso
   âœ… PrÃ³ximo: PASSO 5


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ PASSO 5: CONCEDER PERMISSÃ•ES (APÃ“S PASSO 4)                              â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

   Execute as permissÃµes:
   
   ALTER VIEW public.vw_simulados_com_questoes OWNER TO postgres;
   
   GRANT SELECT ON public.vw_simulados_com_questoes TO anon;
   GRANT SELECT ON public.vw_simulados_com_questoes TO authenticated;
   GRANT SELECT ON public.vw_simulados_com_questoes TO service_role;

   2. Aguarde atÃ© ver "Success" âœ…
   
   Resultado: PermissÃµes concedidas
   âœ… PrÃ³ximo: PASSO 6


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ PASSO 6: TESTAR SELECT NA VIEW                                           â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

   Execute a query de teste:
   
   SELECT * FROM public.vw_simulados_com_questoes
   ORDER BY data_criacao DESC;

   Resultado esperado:
   
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚id_simula â”‚ nome        â”‚ total_questoe â”‚ ativo       â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ 1        â”‚ Simulado 1  â”‚ 45            â”‚ t           â”‚
   â”‚ 2        â”‚ Simulado 2  â”‚ 60            â”‚ t           â”‚
   â”‚ 3        â”‚ Simulado 3  â”‚ 35            â”‚ t           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   âœ… Se viu lista = VIEW funciona!
   âŒ Se viu erro = Problema com RLS ou dados

   Resultado: VIEW estÃ¡ funcionando e acessÃ­vel
   âœ… PrÃ³ximo: PASSO 7


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ PASSO 7: VOLTAR NO APP E FAZER HARD REFRESH                              â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

   No seu browser:
   
   1. Abra o app:
      â†’ http://localhost:5173/painel-aluno
   
   2. FaÃ§a hard refresh (limpa cache):
      â†’ Cmd + Shift + R  (macOS)
      â†’ Ctrl + Shift + R (Windows/Linux)
   
   3. Aguarde carregar (~3 segundos)
   
   4. Veja o sidebar Ã  esquerda

   Resultado esperado:
   
   âœ… SUCESSO:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Simulados            â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ âœ“ Simulado 1         â”‚
   â”‚   [Iniciar]          â”‚
   â”‚ âœ“ Simulado 2         â”‚
   â”‚   [Refazer]          â”‚
   â”‚ âœ“ Simulado 3         â”‚
   â”‚   [Ver Resultado]    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   
   âŒ AINDA COM ERRO:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Simulados            â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ âš ï¸ Erro ao buscar    â”‚
   â”‚ simulados            â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   âœ… PrÃ³ximo: Se sucesso = FIM! ğŸ‰
   âŒ Se erro: Ver seÃ§Ã£o TROUBLESHOOTING


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ CHECKLIST DE SUCESSO                                                     â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

   ApÃ³s completar TODOS os passos, confirme:
   
   â˜‘ VIEW foi criada (PASSO 4 executado)
   â˜‘ PermissÃµes foram concedidas (PASSO 5 executado)
   â˜‘ SELECT na VIEW retorna dados (PASSO 6 funcionou)
   â˜‘ Hard refresh feito (PASSO 7 executado)
   â˜‘ Sidebar mostra simulados sem erro
   â˜‘ Cada simulado tem botÃµes de aÃ§Ã£o
   â˜‘ DevTools console sem erros vermelhos


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         RESULTADO FINAL ESPERADO                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ANTES do FIX:
â””â”€ Erro ao buscar simulados
   â””â”€ DevTools: "Relation vw_simulados_com_questoes does not exist"
   â””â”€ USER IMPACT: NÃ£o consegue acessar nenhum simulado

DEPOIS do FIX:
â”œâ”€ âœ… Sidebar carrega lista completa de simulados
â”œâ”€ âœ… Cada simulado mostra: nome, descriÃ§Ã£o, botÃµes
â”œâ”€ âœ… Contagem de questÃµes aparece corretamente
â”œâ”€ âœ… BotÃµes "Iniciar", "Refazer", "Ver Resultado" funcionam
â”œâ”€ âœ… Click em "Iniciar" abre resolvedor de questÃµes
â”œâ”€ âœ… QuestÃµes carregam e podem ser resolvidas
â””â”€ âœ… APP TOTALMENTE FUNCIONAL!


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         COMO FUNCIONARÃ AGORA                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Frontend (TypeScript):
  buscarSimuladosDisponveis()
  â”œâ”€ Tenta: SELECT * FROM vw_simulados_com_questoes
  â”‚  â””â”€ Se sucesso: Retorna dados com total_questoes âœ…
  â”‚
  â””â”€ Se falhar:
     â”œâ”€ Log: "View nÃ£o acessÃ­vel"
     â”œâ”€ Tenta: SELECT * FROM simulados WHERE ativo = true
     â””â”€ Calcula: COUNT de questÃµes para cada simulado
        â””â”€ Retorna: Array com total_questoes âœ…

Backend (Supabase):
  VIEW vw_simulados_com_questoes
  â”œâ”€ Tabelas: simulados + simulado_questoes (LEFT JOIN)
  â”œâ”€ AgregaÃ§Ã£o: COUNT de questÃµes por simulado
  â”œâ”€ Filtro: WHERE ativo = true
  â””â”€ PermissÃµes: SELECT para anon + authenticated


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         PRÃ“XIMOS TESTES (APÃ“S FIX)                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. TESTE BÃSICO:
   â–¡ Sidebar mostra simulados
   â–¡ Contagem estÃ¡ correta
   â–¡ Sem mensagem de erro

2. TESTE DE INTERAÃ‡ÃƒO:
   â–¡ Click em "Iniciar" abre resolvedor
   â–¡ QuestÃµes carregam
   â–¡ Pode selecionar alternativas
   â–¡ Pode avanÃ§ar para prÃ³xima questÃ£o

3. TESTE DE PERFORMANCE:
   â–¡ Sidebar carrega em < 2 segundos
   â–¡ DevTools Network: ver quantas requisiÃ§Ãµes
   â–¡ Se muitas: significa fallback ativo (N+1)

4. TESTE DE DADOS:
   â–¡ Total de questÃµes por simulado estÃ¡ correto
   â–¡ Verificar em Supabase: SELECT COUNT...
   â–¡ Comparar com o que mostra no app

5. TESTE DE ERRO:
   â–¡ Logout e tente acessar (deve falhar)
   â–¡ Login novamente (deve funcionar)
   â–¡ Confirma que RLS estÃ¡ funcionando


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                        ğŸ‰ BOA SORTE! ğŸ‰
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```
