import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { Calendar, RefreshCw, Loader, AlertCircle, CheckCircle2 } from 'lucide-react';
import { Button } from './button';
import { Card, CardContent, CardHeader, CardTitle } from './card';
export function GoogleCalendarWidget({ isConnected, isLoading = false, lastSync, onConnect, onSync, disabled = false, isDark = false, }) {
    const formatLastSync = (date) => {
        const now = new Date();
        const diff = now.getTime() - date.getTime();
        const minutes = Math.floor(diff / 60000);
        const hours = Math.floor(diff / 3600000);
        if (minutes < 1)
            return 'Agora mesmo';
        if (minutes < 60)
            return `${minutes}m atrás`;
        if (hours < 24)
            return `${hours}h atrás`;
        return date.toLocaleDateString('pt-BR');
    };
    return (_jsxs(Card, { className: isDark ? 'dark:bg-slate-900 dark:border-slate-700' : '', children: [_jsx(CardHeader, { children: _jsxs("div", { className: "flex items-center gap-3", children: [_jsx("div", { className: `p-2 rounded-lg ${isDark ? 'dark:bg-blue-900/30' : 'bg-blue-100'}`, children: _jsx(Calendar, { className: `w-5 h-5 ${isDark ? 'dark:text-blue-400' : 'text-blue-600'}` }) }), _jsxs("div", { className: "flex-1", children: [_jsx(CardTitle, { className: isDark ? 'dark:text-slate-200' : '', children: "Google Calendar" }), _jsx("p", { className: `text-sm ${isDark ? 'dark:text-slate-400' : 'text-gray-600'}`, children: "Sincronize sua agenda automaticamente" })] }), isConnected && (_jsxs("div", { className: "flex items-center gap-1", children: [_jsx(CheckCircle2, { className: "w-4 h-4 text-green-600" }), _jsx("span", { className: "text-sm text-green-600 font-medium", children: "Conectado" })] }))] }) }), _jsx(CardContent, { className: "space-y-4", children: !isConnected ? (_jsxs(_Fragment, { children: [_jsxs("div", { className: "flex items-start gap-3 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-900/50", children: [_jsx(AlertCircle, { className: "w-5 h-5 text-amber-600 dark:text-amber-500 flex-shrink-0 mt-0.5" }), _jsxs("div", { children: [_jsx("p", { className: "text-sm font-medium text-amber-900 dark:text-amber-200", children: "N\u00E3o conectado" }), _jsx("p", { className: `text-sm mt-1 ${isDark ? 'dark:text-amber-300/80' : 'text-amber-700'}`, children: "Clique em \"Vincular\" para autorizar o acesso ao seu Google Calendar" })] })] }), _jsx(Button, { onClick: onConnect, disabled: disabled || isLoading, className: `w-full ${isDark ? 'dark:bg-blue-600 dark:hover:bg-blue-700' : 'bg-blue-600 hover:bg-blue-700'} text-white`, children: isLoading ? (_jsxs(_Fragment, { children: [_jsx(Loader, { className: "w-4 h-4 mr-2 animate-spin" }), "Conectando..."] })) : ('Vincular Google Calendar') })] })) : (_jsxs(_Fragment, { children: [_jsx("div", { className: "space-y-3", children: _jsx("div", { className: "flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-900/50", children: _jsxs("div", { children: [_jsx("p", { className: "text-sm font-medium text-green-900 dark:text-green-200", children: "Sincroniza\u00E7\u00E3o autom\u00E1tica" }), _jsx("p", { className: `text-xs mt-1 ${isDark ? 'dark:text-green-300/70' : 'text-green-700'}`, children: lastSync ? `Última: ${formatLastSync(lastSync)}` : 'Nunca sincronizado' })] }) }) }), _jsxs("div", { className: "grid grid-cols-2 gap-3", children: [_jsx(Button, { onClick: onSync, disabled: disabled || isLoading, variant: "outline", className: `${isDark ? 'dark:border-slate-600 dark:text-slate-200 dark:hover:bg-slate-800' : ''}`, children: isLoading ? (_jsxs(_Fragment, { children: [_jsx(Loader, { className: "w-4 h-4 mr-2 animate-spin" }), "Sincronizando..."] })) : (_jsxs(_Fragment, { children: [_jsx(RefreshCw, { className: "w-4 h-4 mr-2" }), "Sincronizar Agora"] })) }), _jsx(Button, { onClick: onConnect, disabled: disabled || isLoading, variant: "outline", className: `${isDark ? 'dark:border-slate-600 dark:text-slate-200 dark:hover:bg-slate-800' : ''}`, children: "Reconectar" })] }), _jsxs("div", { className: `text-xs p-3 rounded-lg ${isDark ? 'dark:bg-slate-800 dark:text-slate-400' : 'bg-gray-100 text-gray-600'}`, children: [_jsx("p", { className: "font-medium mb-1", children: "\u2139\uFE0F Sincroniza\u00E7\u00E3o:" }), _jsxs("ul", { className: "space-y-1 list-disc list-inside", children: [_jsx("li", { children: "Eventos s\u00E3o sincronizados a cada hora automaticamente" }), _jsx("li", { children: "Voc\u00EA pode sincronizar manualmente a qualquer momento" }), _jsx("li", { children: "Altera\u00E7\u00F5es na agenda aparecem no Google Calendar em minutos" }), _jsx("li", { children: "Google Calendar \u00E9 fonte prim\u00E1ria para eventos criados l\u00E1" })] })] })] })) })] }));
}
